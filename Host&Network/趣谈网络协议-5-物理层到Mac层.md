## 物理层

- 两台电脑用交叉线连接实现通信，网线就属于物理层
- 三台电脑用HUB连接，集线器没有大脑，它完全在物理层工 作。它会将自己收到的每一个字节，都复制到其他端口上去。

## 数据链路层

Hub采取的是广播的模式，如果每一台电脑发出的包，宿舍的每个电脑都能收到，那就麻烦了。这就需要解决几个问题:

> 1. 这个包是发给谁的?谁应该接收?
> 2. 大家都在发，会不会产生混乱?有没有谁先发、谁后发的规则?
> 3. 如果发送的时候出现了错误，怎么办?

这几个问题，都是第二层，数据链路层，即MAC层要解决的问题。MAC的全称是Medium Access Control，即媒体访问控制。控制什么呢?其实就是控制在往媒体上发数据的时候，谁先发、谁后发的问题。防止发生混乱。这解决的是第二个问题。这个问题中的规则，学名叫多路访问。有很多算法可以解决这个问题。

- 分多个车道。即：信道划分
- 单双号出行，轮着来。即：轮流协议; 
- 不管三七二十一，有事儿先出门，发现特堵，就回去。错过高峰再出。我们叫作随机接入协议。著名的以太网，用的就是这个方式。

如何解决第一个问题：

网络包中需要添加目标Mac地址，目标机器收到包后，根据包中的目标Mac地址判断是否是发给它的。一开始不知道目标Mac地址，那么通过ARP广播获取。

为了避免每次都用 ARP 请求，机器本地也会进行 ARP 缓存。当然机器会不断地上线下线，IP 也可能会变，所以 ARP 的 MAC 地址缓存过一段时间就会过期。

交换机是有 MAC 地址学习能力的，学完了它就知道谁在哪儿了，不用广播了。